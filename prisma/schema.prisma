generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id            String  @id @default(auto()) @map("_id") @db.ObjectId
  email         String? 
  walletAddress String? 
  fitbitId      String  @unique
  accessToken   String
  refreshToken  String
  sleepData     Sleep[]
  createdAt     DateTime @default(now())
  totalRewards  Int ?
}

model Sleep {
  id        String  @id @default(auto()) @map("_id") @db.ObjectId
  date      String
  zkProof   String
  reward    Int
  isValid   Boolean
  userId    String  @db.ObjectId
  user      User    @relation(fields: [userId], references: [id], onDelete: Cascade)
}

// model TotalReward {
//   id         String   @id @default(auto()) @map("_id") @db.ObjectId
//   totalReward Int
//   userId      String   @db.ObjectId
//   user        User     @relation(fields: [userId], references: [id])
// }

// model sleep {
//   id            String    @id @default(auto()) @map("_id") @db.ObjectId
//   summary       Summary[]
//   minutesAsleep Int
//   minutesAwake  Int
//   timeInBed     Int
//   userId        String?   @db.ObjectId
//   User          User?     @relation(fields: [userId], references: [id])
// }

// model Summary {
//   id      String @id @default(auto()) @map("_id") @db.ObjectId
//   deep    Int
//   light   Int
//   rem     Int
//   wake    Int
//   sleepId String @db.ObjectId
//   Sleep   sleep  @relation(fields: [sleepId], references: [id])
// }
